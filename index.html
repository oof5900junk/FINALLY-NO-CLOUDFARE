<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PowerSchool LSR7</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒ</text></svg>">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; }

    /* Fake Login */
    .login-box { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .login-card { background: white; padding: 40px 50px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); width: 400px; max-width: 90%; }
    .login-logo { width: 60px; height: 60px; margin: 0 auto 15px; background: #667eea; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; }
    .login-box h2 { color: #2c3e50; margin-bottom: 8px; font-size: 1.8em; }
    .login-subtitle { color: #7f8c8d; font-size: 14px; }
    .input-group { margin-bottom: 20px; }
    .login-box input { width: 100%; padding: 12px 15px; border-radius: 6px; border: 1.5px solid #ddd; font-size: 14px; transition: all 0.3s; }
    .login-box input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
    .login-box button { width: 100%; padding: 13px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 15px; font-weight: 600; transition: all 0.3s; }
    .login-box button:hover { background: #5568d3; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(102,126,234,0.4); }
    .error-msg { color: #e74c3c; background: #ffe5e5; padding: 10px 15px; border-radius: 6px; margin-top: 15px; display: none; border-left: 3px solid #e74c3c; }
    .loading { display: none; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; margin: 10px auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .forgot-password a { color: #667eea; text-decoration: none; font-size: 13px; cursor: pointer; }
    .forgot-password a:hover { text-decoration: underline; }

    /* Forgot Modal */
    .forgot-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
    .forgot-modal.show { display: flex; }
    .forgot-content { background: white; padding: 30px 40px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); width: 400px; max-width: 90%; }

    /* Snake Window */
    .snake-window { display: none; position: fixed; bottom: 20px; right: 20px; width: 320px; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 10000; overflow: hidden; }
    .snake-window.show { display: block; }
    .snake-header { background: #667eea; color: white; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; }
    .snake-close { background: none; border: none; color: white; font-size: 20px; cursor: pointer; }
    .snake-canvas { border: 2px solid #333; border-radius: 4px; background: #000; }

    /* Hub */
    .hub-content { display: none; padding: 40px 20px; }
    .hub-content.golden { background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%); }
    .hub-content.lucky { background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%); }
    .hub-content.forkknife { background: linear-gradient(135deg, #4a4a4a 0%, #2c2c2c 100%); }
    .hub-content.golden::before, .hub-content.lucky::before, .hub-content.forkknife::before {
      content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(circle, rgba(255,215,0,0.8) 1px, transparent 1px), radial-gradient(circle, rgba(255,223,0,0.6) 1px, transparent 1px); background-size: 50px 50px, 80px 80px; animation: sparkle 3s linear infinite; pointer-events: none; z-index: 1;
    }
    @keyframes sparkle { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    .container { max-width: 1200px; margin: 0 auto; position: relative; z-index: 2; }
    .category-header { background: #4472c4; color: white; padding: 20px 25px; border-radius: 8px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; }
    .category-header:hover { background: #3a5fa9; transform: translateY(-2px); }
    .arrow { transition: transform 0.3s; }
    .arrow.open { transform: rotate(180deg); }
    .category-content { display: none; padding: 20px 0; }
    .category-content.show { display: block; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 20px; }
    .link-box { background: white; border-radius: 8px; padding: 20px 15px; text-decoration: none; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.08); border: 1px solid #e0e0e0; transition: all 0.3s; }
    .link-box:hover { transform: translateY(-4px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-color: #4472c4; }
    .link-icon { width: 60px; height: 60px; background: #4472c4; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 28px; }

    /* Chat */
    .chat-button { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(102,126,234,0.4); z-index: 999; font-size: 28px; transition: all 0.3s; }
    .chat-button:hover { transform: scale(1.1); }
    .chat-window { display: none; position: fixed; bottom: 100px; right: 30px; width: 380px; height: 520px; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 1000; flex-direction: column; }
    .chat-window.show { display: flex; }
    .chat-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
    .chat-close { background: none; border: none; color: white; font-size: 24px; cursor: pointer; }
    .chat-messages { flex: 1; overflow-y: auto; padding: 20px; background: #f9f9f9; }
    .chat-message { margin-bottom: 15px; }
    .chat-message .username { font-weight: 700; color: #667eea; font-size: 14px; }
    .chat-message .timestamp { font-size: 11px; color: #999; margin-left: 8px; }
    .chat-message .text { background: white; padding: 10px 15px; border-radius: 12px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); word-wrap: break-word; }
    .chat-input-container { padding: 15px; background: white; border-top: 1px solid #eee; display: flex; gap: 10px; }
    .chat-input { flex: 1; padding: 12px 15px; border: 1.5px solid #ddd; border-radius: 25px; outline: none; font-size: 14px; }
    .chat-send { width: 45px; height: 45px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 50%; color: white; font-size: 18px; cursor: pointer; }

    /* Sparkles */
    .sparkle { position: fixed; pointer-events: none; z-index: 9999; animation: floatSparkle 4s linear forwards; }
    @keyframes floatSparkle { 0% { transform: translateY(100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
  </style>
</head>
<body>
  <!-- Fake Login -->
  <div class="login-box" id="cloak">
    <div class="login-card">
      <div class="login-header">
        <div class="login-logo">ğŸ“š</div>
        <h2>PowerSchool</h2>
        <p class="login-subtitle">Lee's Summit R-7 School District</p>
      </div>
      <div class="input-group">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter your username">
      </div>
      <div class="input-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password">
      </div>
      <button id="loginBtn">Sign In</button>
      <div class="loading" id="loading"></div>
      <div class="error-msg" id="errorMsg">âŒ Invalid username or password. Please try again.</div>
      <div class="forgot-password"><a id="forgotLink">Forgot your password?</a></div>
    </div>
  </div>

  <!-- Forgot Modal -->
  <div class="forgot-modal" id="forgotModal">
    <div class="forgot-content">
      <h3>Reset Password</h3>
      <p>Enter your email address to reset your password.</p>
      <input type="text" id="recoveryEmail" placeholder="Enter your email address">
      <div class="forgot-buttons">
        <button class="forgot-cancel" id="cancelForgot">Cancel</button>
        <button class="forgot-submit" id="submitForgot">Submit</button>
      </div>
    </div>
  </div>

  <!-- Snake Window -->
  <div class="snake-window" id="snakeWindow">
    <div class="snake-header">
      <h4>ğŸ Snake Game</h4>
      <button class="snake-close" id="snakeClose">Ã—</button>
    </div>
    <div class="snake-game">
      <canvas id="snakeCanvas" width="280" height="280"></canvas>
      <div class="snake-score">Score: <span id="snakeScore">0</span></div>
      <div class="snake-controls">Use Arrow Keys</div>
    </div>
  </div>

  <!-- Hub Content -->
  <div class="hub-content" id="hub">
    <div class="container">
      <div class="hub-header">
        <h1>ğŸŒ Link Hub</h1>
        <p>Quick access to your favorite sites</p>
      </div>

      <!-- Proxies -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('proxies')">
          <div class="category-title"><span>ğŸŒ</span><span>Proxies</span></div>
          <span class="arrow" id="arrow-proxies">â–¼</span>
        </div>
        <div class="category-content" id="content-proxies">
          <div class="grid">
            <a href="https://shuttleproxy.com" target="_blank" class="link-box"><div class="link-icon">ğŸš€</div><div class="link-name">Shuttle</div></a>
            <a href="https://hy.hypertabs.net" target="_blank" class="link-box"><div class="link-icon">âš¡</div><div class="link-name">Hypertabs</div></a>
            <a href="https://incog.dev" target="_blank" class="link-box"><div class="link-icon">ğŸ•¶ï¸</div><div class="link-name">Incognito</div></a>
            <a href="https://ludiproxy.com" target="_blank" class="link-box"><div class="link-icon">ğŸ¯</div><div class="link-name">Ludicrous</div></a>
            <a href="https://shadowtabz.com" target="_blank" class="link-box"><div class="link-icon">ğŸ‘¤</div><div class="link-name">Shadowtabz</div></a>
            <a href="https://kazwire.com" target="_blank" class="link-box"><div class="link-icon">ğŸ”Œ</div><div class="link-name">Kazwire</div></a>
            <a href="https://degeneracy.netlify.app" target="_blank" class="link-box"><div class="link-icon">ğŸŒ€</div><div class="link-name">Degeneracy</div></a>
            <a href="https://noctura.app" target="_blank" class="link-box"><div class="link-icon">ğŸŒ™</div><div class="link-name">Noctura</div></a>
            <a href="https://elixirproxy.com" target="_blank" class="link-box"><div class="link-icon">âš—ï¸</div><div class="link-name">Elixir</div></a>
            <a href="https://tsunamiproxy.com" target="_blank" class="link-box"><div class="link-icon">ğŸŒŠ</div><div class="link-name">Tsunami</div></a>
            <a href="https://www.blockaway.net" target="_blank" class="link-box"><div class="link-icon">ğŸŒ</div><div class="link-name">BlockAway</div></a>
            <a href="https://www.croxyproxy.com" target="_blank" class="link-box"><div class="link-icon">ğŸ”“</div><div class="link-name">CroxyProxy</div></a>
            <a href="https://www.proxysite.com" target="_blank" class="link-box"><div class="link-icon">ğŸŒ</div><div class="link-name">ProxySite</div></a>
            <a href="https://hide.me/en/proxy" target="_blank" class="link-box"><div class="link-icon">ğŸ”’</div><div class="link-name">Hide.me</div></a>
            <a href="https://www.hidemyass.com/en-us/proxy" target="_blank" class="link-box"><div class="link-icon">ğŸ­</div><div class="link-name">HideMyAss</div></a>
            <a href="https://plainproxies.com" target="_blank" class="link-box"><div class="link-icon">âš¡</div><div class="link-name">PlainProxies</div></a>
          </div>
        </div>
      </div>

      <!-- Social Media -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('social')">
          <div class="category-title"><span>ğŸ“±</span><span>Social Media</span></div>
          <span class="arrow" id="arrow-social">â–¼</span>
        </div>
        <div class="category-content" id="content-social">
          <div class="grid">
            <a href="https://youtube.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“º</div><div class="link-name">YouTube</div></a>
            <a href="https://instagram.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“·</div><div class="link-name">Instagram</div></a>
            <a href="https://twitter.com" target="_blank" class="link-box"><div class="link-icon">ğŸ¦</div><div class="link-name">Twitter/X</div></a>
            <a href="https://tiktok.com" target="_blank" class="link-box"><div class="link-icon">ğŸµ</div><div class="link-name">TikTok</div></a>
            <a href="https://reddit.com" target="_blank" class="link-box"><div class="link-icon">ğŸ¤–</div><div class="link-name">Reddit</div></a>
          </div>
        </div>
      </div>

      <!-- Streaming -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('streaming')">
          <div class="category-title"><span>ğŸ¬</span><span>Streaming</span></div>
          <span class="arrow" id="arrow-streaming">â–¼</span>
        </div>
        <div class="category-content" id="content-streaming">
          <div class="grid">
            <a href="https://netflix.com" target="_blank" class="link-box"><div class="link-icon">ğŸ¬</div><div class="link-name">Netflix</div></a>
            <a href="https://disneyplus.com" target="_blank" class="link-box"><div class="link-icon">ğŸ°</div><div class="link-name">Disney+</div></a>
            <a href="https://hulu.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“º</div><div class="link-name">Hulu</div></a>
            <a href="https://twitch.tv" target="_blank" class="link-box"><div class="link-icon">ğŸ®</div><div class="link-name">Twitch</div></a>
            <a href="https://primevideo.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“¦</div><div class="link-name">Prime Video</div></a>
          </div>
        </div>
      </div>

      <!-- Games -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('games')">
          <div class="category-title"><span>ğŸ®</span><span>Games</span></div>
          <span class="arrow" id="arrow-games">â–¼</span>
        </div>
        <div class="category-content" id="content-games">
          <div class="grid">
            <a href="https://roblox.com" target="_blank" class="link-box"><div class="link-icon">ğŸ®</div><div class="link-name">Roblox</div></a>
            <a href="https://krunker.io" target="_blank" class="link-box"><div class="link-icon">ğŸ”«</div><div class="link-name">Krunker</div></a>
            <a href="https://skribbl.io" target="_blank" class="link-box"><div class="link-icon">âœï¸</div><div class="link-name">Skribbl</div></a>
            <a href="https://agar.io" target="_blank" class="link-box"><div class="link-icon">âšª</div><div class="link-name">Agar.io</div></a>
            <a href="https://slither.io" target="_blank" class="link-box"><div class="link-icon">ğŸ</div><div class="link-name">Slither.io</div></a>
          </div>
        </div>
      </div>

      <!-- Tools -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('tools')">
          <div class="category-title"><span>ğŸ”§</span><span>Tools</span></div>
          <span class="arrow" id="arrow-tools">â–¼</span>
        </div>
        <div class="category-content" id="content-tools">
          <div class="grid">
            <a href="https://discord.com" target="_blank" class="link-box"><div class="link-icon">ğŸ’¬</div><div class="link-name">Discord</div></a>
            <a href="https://gmail.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“§</div><div class="link-name">Gmail</div></a>
            <a href="https://drive.google.com" target="_blank" class="link-box"><div class="link-icon">ğŸ’¾</div><div class="link-name">Google Drive</div></a>
            <a href="https://docs.google.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“</div><div class="link-name">Google Docs</div></a>
            <a href="https://github.com" target="_blank" class="link-box"><div class="link-icon">ğŸ’»</div><div class="link-name">GitHub</div></a>
          </div>
        </div>
      </div>

      <!-- Music -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('music')">
          <div class="category-title"><span>ğŸµ</span><span>Music</span></div>
          <span class="arrow" id="arrow-music">â–¼</span>
        </div>
        <div class="category-content" id="content-music">
          <div class="grid">
            <a href="https://spotify.com" target="_blank" class="link-box"><div class="link-icon">ğŸµ</div><div class="link-name">Spotify</div></a>
            <a href="https://soundcloud.com" target="_blank" class="link-box"><div class="link-icon">â˜ï¸</div><div class="link-name">SoundCloud</div></a>
            <a href="https://music.youtube.com" target="_blank" class="link-box"><div class="link-icon">ğŸ¶</div><div class="link-name">YouTube Music</div></a>
            <a href="https://music.apple.com" target="_blank" class="link-box"><div class="link-icon">ğŸ</div><div class="link-name">Apple Music</div></a>
          </div>
        </div>
      </div>

      <!-- Finance -->
      <div class="category">
        <div class="category-header" onclick="toggleCategory('finance')">
          <div class="category-title"><span>ğŸ’°</span><span>Finance</span></div>
          <span class="arrow" id="arrow-finance">â–¼</span>
        </div>
        <div class="category-content" id="content-finance">
          <div class="grid">
            <a href="https://www.marketwatch.com/market-data" target="_blank" class="link-box"><div class="link-icon">ğŸ“ˆ</div><div class="link-name">MarketWatch</div></a>
            <a href="https://rush.gold/" target="_blank" class="link-box"><div class="link-icon">ğŸ¥‡</div><div class="link-name">Rush Gold</div></a>
            <a href="https://www.investing.com" target="_blank" class="link-box"><div class="link-icon">ğŸ’°</div><div class="link-name">Investing.com</div></a>
            <a href="https://finance.yahoo.com" target="_blank" class="link-box"><div class="link-icon">ğŸ’¹</div><div class="link-name">Yahoo Finance</div></a>
            <a href="https://www.tradingview.com" target="_blank" class="link-box"><div class="link-icon">ğŸ“Š</div><div class="link-name">TradingView</div></a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Button & Window -->
  <div class="chat-button" id="chatButton">ğŸ’¬</div>
  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <h3>ğŸ’¬ Site Chat</h3>
      <button class="chat-close" id="chatClose">Ã—</button>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chatInput" placeholder="Type a message...">
      <button class="chat-send" id="chatSend">â¤</button>
    </div>
  </div>

  <script>
    let clickCount = 0;
    let goldenMode = false, luckyMode = false, forkknifeMode = false;
    const konamiCode = 'upupdowndownleftrightleftrightabab';
    let konamiInput = '';

    const cloak = document.getElementById('cloak');
    const hub = document.getElementById('hub');
    const loginBtn = document.getElementById('loginBtn');
    const errorMsg = document.getElementById('errorMsg');
    const loading = document.getElementById('loading');
    const usernameInput = document.getElementById('username');
    const forgotLink = document.getElementById('forgotLink');
    const forgotModal = document.getElementById('forgotModal');
    const recoveryEmail = document.getElementById('recoveryEmail');
    const submitForgot = document.getElementById('submitForgot');
    const snakeWindow = document.getElementById('snakeWindow');
    const snakeClose = document.getElementById('snakeClose');

    function unlockHub() {
      cloak.style.display = 'none';
      hub.style.display = 'block';
      if (goldenMode) { hub.classList.add('golden'); createSparkles('golden'); }
      if (luckyMode) { hub.classList.add('lucky'); createSparkles('lucky'); }
      if (forkknifeMode) { hub.classList.add('forkknife'); createSparkles('forkknife'); }
    }

    function createSparkles(mode) {
      const emojis = mode === 'golden' ? ['âœ¨','â­','ğŸŒŸ','ğŸ’«','âš¡','ğŸ’›','ğŸ”†'] :
                     mode === 'lucky' ? ['ğŸ€','ğŸ°','ğŸ²','ğŸ’š','ğŸŒˆ','ğŸŠ','ğŸ”®','ğŸ±'] :
                     ['ğŸ´','ğŸ”ª','ğŸ¥„','ğŸ½ï¸','ğŸ”±','âš”ï¸'];
      setInterval(() => {
        const s = document.createElement('div');
        s.className = 'sparkle';
        s.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        s.style.left = Math.random() * 100 + 'vw';
        s.style.fontSize = (Math.random() * 20 + 15) + 'px';
        s.style.animationDuration = (Math.random() * 2 + 2) + 's';
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 4000);
      }, 300);
    }

    function toggleCategory(id) {
      const content = document.getElementById('content-' + id);
      const arrow = document.getElementById('arrow-' + id);
      content.classList.toggle('show');
      arrow.classList.toggle('open');
    }

    // Unlock methods
    loginBtn.addEventListener('click', () => {
      clickCount++;
      loginBtn.style.display = 'none';
      loading.style.display = 'block';
      errorMsg.style.display = 'none';
      setTimeout(() => {
        loginBtn.style.display = 'block';
        loading.style.display = 'none';
        if (clickCount < 3) {
          errorMsg.style.display = 'block';
          usernameInput.value = '';
          passwordInput.value = '';
        } else unlockHub();
      }, 800);
    });

    usernameInput.addEventListener('input', () => {
      if (usernameInput.value.toLowerCase() === 'bypass') unlockHub();
    });

    document.addEventListener('keydown', e => {
      if (e.ctrlKey && e.shiftKey && e.key === 'L') { e.preventDefault(); unlockHub(); }
    });

    let logoClickCount = 0;
    document.querySelector('.login-logo').addEventListener('click', () => {
      logoClickCount++;
      if (logoClickCount === 3) unlockHub();
      setTimeout(() => logoClickCount = 0, 1000);
    });

    forgotLink.addEventListener('click', e => { e.preventDefault(); forgotModal.classList.add('show'); });

    submitForgot.addEventListener('click', () => {
      const input = recoveryEmail.value.toLowerCase();
      if (input === 'm1ltvrs') { goldenMode = true; forgotModal.classList.remove('show'); unlockHub(); }
      else if (input === 'lucky') { luckyMode = true; forgotModal.classList.remove('show'); unlockHub(); }
      else if (input === 'forkknife') { forkknifeMode = true; forgotModal.classList.remove('show'); unlockHub(); }
      else {
        recoveryEmail.style.borderColor = '#e74c3c';
        setTimeout(() => recoveryEmail.style.borderColor = '#ddd', 1000);
      }
    });

    recoveryEmail.addEventListener('input', () => {
      konamiInput = recoveryEmail.value.toLowerCase().replace(/\s/g, '');
      if (konamiInput === konamiCode) {
        recoveryEmail.value = '';
        forgotModal.classList.remove('show');
        snakeWindow.classList.add('show');
        initSnakeGame();
      }
    });

    snakeClose.addEventListener('click', () => { snakeWindow.classList.remove('show'); stopSnakeGame(); });

    // Snake Game
    let snake, food, dx = 0, dy = 0, score = 0, gameLoop;
    const ctx = document.getElementById('snakeCanvas').getContext('2d');
    const gridSize = 14, tileCount = 20;

    function initSnakeGame() {
      snake = [{x:10,y:10}];
      food = {x:15,y:15};
      dx = 0; dy = 0; score = 0;
      document.getElementById('snakeScore').textContent = score;
      if (gameLoop) clearInterval(gameLoop);
      gameLoop = setInterval(updateSnake, 100);
      document.addEventListener('keydown', handleSnakeInput);
    }

    function stopSnakeGame() {
      if (gameLoop) clearInterval(gameLoop);
      document.removeEventListener('keydown', handleSnakeInput);
    }

    function handleSnakeInput(e) {
      if (!snakeWindow.classList.contains('show')) return;
      switch(e.key) {
        case 'ArrowUp': if (dy === 0) { dx = 0; dy = -1; } break;
        case 'ArrowDown': if (dy === 0) { dx = 0; dy = 1; } break;
        case 'ArrowLeft': if (dx === 0) { dx = -1; dy = 0; } break;
        case 'ArrowRight': if (dx === 0) { dx = 1; dy = 0; } break;
      }
      e.preventDefault();
    }

    function updateSnake() {
      const head = {x: snake[0].x + dx, y: snake[0].y + dy};
      if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) { stopSnakeGame(); snakeWindow.classList.remove('show'); return; }
      for (let s of snake) if (head.x === s.x && head.y === s.y) { stopSnakeGame(); snakeWindow.classList.remove('show'); return; }
      snake.unshift(head);
      if (head.x === food.x && head.y === food.y) { score++; document.getElementById('snakeScore').textContent = score; placeFood(); } else snake.pop();
      drawSnake();
    }

    function placeFood() { food = {x: Math.floor(Math.random()*tileCount), y: Math.floor(Math.random()*tileCount)}; }

    function drawSnake() {
      ctx.fillStyle = '#000'; ctx.fillRect(0,0,280,280);
      ctx.fillStyle = '#0f0'; snake.forEach(s => ctx.fillRect(s.x*gridSize, s.y*gridSize, gridSize-2, gridSize-2));
      ctx.fillStyle = '#f00'; ctx.fillRect(food.x*gridSize, food.y*gridSize, gridSize-2, gridSize-2);
    }

    // Chat Feature
    const chatButton = document.getElementById('chatButton');
    const chatWindow = document.getElementById('chatWindow');
    const chatClose = document.getElementById('chatClose');
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');
    const chatMessages = document.getElementById('chatMessages');

    let chatUsername = localStorage.getItem('chatUsername') || 'User' + Math.floor(Math.random()*9999);
    localStorage.setItem('chatUsername', chatUsername);

    function loadChat() {
      const msgs = JSON.parse(localStorage.getItem('chatMsgs') || '[]');
      chatMessages.innerHTML = '';
      msgs.forEach(m => displayChatMessage(m.user, m.text, m.time));
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function displayChatMessage(user, text, time) {
      const div = document.createElement('div');
      div.className = 'chat-message';
      const t = new Date(time).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
      div.innerHTML = `<div class="username">${user}<span class="timestamp">${t}</span></div><div class="text">${text}</div>`;
      chatMessages.appendChild(div);
    }

    function sendChatMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      const now = Date.now();
      displayChatMessage(chatUsername, text, now);
      const msgs = JSON.parse(localStorage.getItem('chatMsgs') || '[]');
      msgs.push({user: chatUsername, text, time: now});
      if (msgs.length > 100) msgs.shift();
      localStorage.setItem('chatMsgs', JSON.stringify(msgs));
      chatInput.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    chatButton.addEventListener('click', () => {
      chatWindow.classList.toggle('show');
      if (chatWindow.classList.contains('show')) {
        loadChat();
        chatInput.focus();
      }
    });

    chatClose.addEventListener('click', () => chatWindow.classList.remove('show'));
    chatSend.addEventListener('click', sendChatMessage);
    chatInput.addEventListener('keypress', e => { if (e.key === 'Enter') sendChatMessage(); });
  </script>
</body>
</html>










